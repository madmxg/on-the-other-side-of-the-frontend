<!doctype html>
<html lang="en">
  <head>
    <title>On the other side of the frontend</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="node_modules/@shower/ribbon/styles/styles.css" />
    <link rel="stylesheet" href="node_modules/highlight.js/styles/github.min.css" />
    <link rel="stylesheet" href="assets/css/styles.css" />
  </head>
  <body class="shower list">
    <header class="caption">
      <h1>–ü–æ —Ç—É —Å—Ç–æ—Ä–æ–Ω—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞</h1>
      <p><a target="_blank" href="https://t.me/madmxg">Mikhail Garbuzov</a>, Jetty Cloud.</p>
    </header>

    <section class="slide">
      <h2 class="shout" style="font-size: 3em">–ü–æ —Ç—É —Å—Ç–æ—Ä–æ–Ω—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞</h2>
    </section>

    <section class="slide">
      <p>Intro</p>
      <h3 style="font-size: 2em; margin-block-end: 0px">–ú–∏—Ö–∞–∏–ª –ì–∞—Ä–±—É–∑–æ–≤</h3>
      <span>Picture</span>
      <ol>
        <li>Software Engineer at JettyCloud</li>
        <li>
          MoscowJS Co-Organizer
          <code class="comment" style="color: rgba(128, 128, 128, 0.4); background-color: initial">
            Q9S-X29
          </code>
        </li>
        <li>More than 10 Y expirience with JS dev</li>
      </ol>
    </section>

    <section class="slide">
      <h2 class="shout grow">üôã‚Äç‚ôÄÔ∏è&nbsp;üôã‚Äç‚ôÇÔ∏è</h2>
      <!-- TODO: –∑–∞–ª –∏–∑ —ç–º–æ–¥–∂–∏ —Å–ª—É—à–∞—Ç–µ–ª–µ–π -->
      <!-- <h2 class="shout grow">üôã‚Äç‚ôÄÔ∏è&nbsp;üôã‚Äç‚ôÇÔ∏è</h2> -->
      <!-- <h2 class="shout grow">üôã‚Äç‚ôÄÔ∏è&nbsp;üôã‚Äç‚ôÇÔ∏è</h2> -->
    </section>

    <section class="slide">
      <h2 class="shout shout-e">–ú–æ—Ç–∏–≤–∞—Ü–∏—è</h2>
    </section>

    <section class="slide">
      <h2 class="">Community</h2>
      <ol>
        <li>–ò–≤–µ–Ω—Ç—ã</li>
        <li class="next">–î–æ–∫–ª–∞–¥—ã</li>
        <li class="next">NodeJS</li>
      </ol>
    </section>

    <section class="slide">
      <h2 class="">–†–∞–∑–≤–∏—Ç–∏–µ</h2>
      <ol>
        <li>Lead</li>
        <li class="next">Fullstack</li>
        <li class="next">Backend</li>
        <li class="next">Software Engineer</li>
      </ol>
    </section>

    <section class="slide">
      <h2 class="shout shout-e">–Ø –∏ —Ç–∞–∫ —É–º–µ—é –ø–∏—Å–∞—Ç—å backend</h2>
    </section>

    <section class="slide">
      <pre class="place typescript">
        <code>const express = require('express')
const app = express()

const port = 3000
app.get('/', (req, res) => {
  res.send('Hello World!')
})
app.listen(port, () => {
  console.log(`Example app listening on port ${port}`)
})
      </code>
      </pre>
    </section>

    <!-- <section class="slide">
      <pre class="place typescript">
        <code>'use server'

export async function greeting(subject: string) {
  try {
    return `Hello ${subject}`
  } catch (error) {
    throw new Error('Failed to greeting')
  }
}
        </code>
      </pre>
    </section> -->

    <section class="slide clear">
      <img class="cover h" src="assets/images/use-server.jpg" />
    </section>

    <section class="slide clear">
      <img class="cover h" src="assets/images/mjs-58-nextjs.jpg" />
    </section>

    <section class="slide">
      <h2 class="">–û —á–µ–º –¥–æ–∫–ª–∞–¥</h2>
      <ol>
        <li class="next">–£–ø–∞–∫—É–µ–º –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</li>
        <li class="next">–î–æ–±–∞–≤–∏–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π</li>
        <li class="next">–ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏</li>
      </ol>
    </section>

    <section class="slide">
      <h2 class="shout shout-e">–ö–∞–∫ –æ–±—ã—á–Ω–æ –≤—ã –≤–∏–¥–∏—Ç–µ –±–µ–∫—ç–Ω–¥</h2>
    </section>

    <section class="slide clear">
      <h3>GraphQL</h3>
      <img class="cover h" src="assets/images/graphql.jpg" />
    </section>

    <section class="slide clear">
      <h3>OpenAPI | Swagger</h3>
      <img class="cover h" src="assets/images/swagger.jpg" />
    </section>

    <section class="slide clear">
      <h3>SOAP</h3>
      <img class="cover h" src="assets/images/soap.jpg" />
    </section>

    <section class="slide clear">
      <img class="cover h" src="assets/images/mermaid.jpeg" />
    </section>

    <section class="slide clear">
      <img class="cover h" src="assets/images/mermaid-fb.jpg" />
    </section>

    <section class="slide">
      <p style="color: brown; font-size: 1.5em">500</p>
      <p class="note" style="font-size: 1.5em">Internal Server Error</p>
    </section>

    <!-- <section class="slide">
      <h2>BE - —ç—Ç–æ —Å–∫—É—á–Ω–æ</h2>
      <ol>
        <li class="next">–ø–µ—Ä–µ–∫–ª–∞–¥—ã–≤–∞–µ–º JSON`—ã</li>
        <li class="next">–∫–æ–ø–∏–ø–∞—Å—Ç–∏–ø 100500 CRUD</li>
        <li class="next">... ?</li>
        <li class="next">PROFIT</li>
      </ol>
    </section>

    <section class="slide">
      <h2>FE - —ç—Ç–æ —Å–∫—É—á–Ω–æ</h2>
      <ol>
        <li class="next">—à–ª–µ–ø–∞–µ–º —Ñ–æ—Ä–º—ã</li>
        <li class="next">–∫—Ä–∞—Å–∏–º/–¥–≤–∏–≥–∞–µ–º –∫–Ω–æ–ø–∫–∏</li>
        <li class="next">–≤—ã–±–∏—Ä–∞–µ–º —Å—Ç–µ–π—Ç –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç</li>
        <li class="next">—Å—Ç—Ä–∞–¥–∞–µ–º –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ —Ä–µ–¥—å—é—Å–µ—Ä–æ–≤ –¥–ª—è Redux</li>
      </ol>
    </section>

    <section class="slide">
      <h2>{{ Placeholder }} - —ç—Ç–æ —Å–∫—É—á–Ω–æ</h2>
      <ol>
        <li>[QA] –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—é—Ç</li>
        <li>[DevOps] yaml developer</li>
      </ol>
    </section> -->

    <section class="slide">
      <h2>As Cr√¥nicas de Wesley</h2>
      <p>IMG // TODO: find original picture</p>
      <p></p>
    </section>

    <!-- <section
      class="slide clear"
      style="
        background-color: #0b71b1;
        background: linear-gradient(
          0deg,
          rgba(2, 0, 36, 1) 0%,
          rgba(9, 9, 121, 1) 35%,
          rgba(0, 212, 255, 1) 100%
        );
      "
    >
      <img class="cover h" src="assets/images/iceberg.jpeg" />
    </section> -->

    <section class="slide clear">
      <img class="cover w" src="assets/images/cronicas/02-lets.jpeg" />
    </section>

    <section class="slide">
      <h2>–∏–ª–∏ –Ω–∞–ø–∏—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h2>
      <p>https://nodejs.org/docs</p>
      <p>https://expressjs.com</p>
    </section>

    <section class="slide">
      <h2>Requirements</h2>
      <ol>
        <li class="next">npm</li>
        <li class="next">Express</li>
        <li class="next">Jest</li>
        <li class="next">Javascript</li>
      </ol>
    </section>

    <section class="slide">
      <h2>Requirements</h2>
      <ol>
        <li>npm</li>
        <li>Express</li>
        <li>Jest</li>
        <li>
          <del>Javascript</del>
          Typescript
        </li>
      </ol>
    </section>

    <!-- <section
      class="slide clear"
      style="
        background: rgb(172, 35, 51);
        background: radial-gradient(circle, rgba(172, 35, 51, 1) 0%, rgba(40, 2, 5, 1) 100%);
      "
    >
      <img class="cover h" src="assets/images/thats-all-folks.svg" />
    </section> -->

    <section class="slide neck-bg1">
      <h2 class="shout shout-e" style="font-size: 2em">–°—Ç–∞—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞</h2>
    </section>

    <section class="slide">
      <pre class="place bash">
        <code>npm init --yes</code>
        <code>npm install express {lodash,ramda,fp-ts}</code>
      </pre>
    </section>

    <section class="slide neck-bg1">
      <h2 class="shout shout-e">Dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏</h2>
    </section>

    <section class="slide">
      <pre class="place bash">
        <code>npm install --save-dev \
  eslint prettier husky lint-staged \
  jest \
  typescript \
  @types/node \
  @tsconfig/node20
      </code>
      </pre>
    </section>

    <section class="slide neck-bg1">
      <h2 class="shout shout-e">Framework</h2>
    </section>

    <section class="slide">
      <h2>Framework</h2>
      <ul>
        <li>ExpressJS</li>
        <li>Koa</li>
        <li>NestJS</li>
        <li>NextJS</li>
        <li>TODO: –∫–∞—Ä—Ç–∏–Ω–∫–∞ —Å–æ —Å—Ç–µ–π—Ç –æ—Ñ –ñ–°</li>
      </ul>
    </section>

    <section class="slide">
      <pre class="place typescript">
        <code>import express from 'express';
import { config } from './config';
import { routes } from './routes';

const app = express();
app.use(routes());

app.get('/', (req, res) => res.send('Hello, World!'));
app.listen(config.server.port, () => {
  console.log(`Server is running on port ${config.server.port}`);
});
        </code>
      </pre>
    </section>

    <!-- TODO: -->
    <!-- <section class="slide">
      <h2>–ü–∏—à–µ–º –∫–∞–∫—É—é-—Ç–æ –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫—É</h2>
      <p>–ö–æ—Ç–æ—Ä–∞—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤–∞—à—É –∑–∞–¥–∞—á—É</p>
    </section> -->

    <section class="slide neck-bg1">
      <h2 class="shout shout-e">Databases</h2>
    </section>

    <section class="slide neck-bg1">
      <h2 class="shout shout-e">OS-level virtualization</h2>
    </section>

    <section class="slide">
      <h2>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è</h2>
      <ul>
        <li>Docker</li>
        <li>Podman</li>
        <li></li>
        <li>k8s</li>
      </ul>
    </section>

    <section class="slide">
      <pre class="place dockerfile">
        <code>  FROM node as builder
  WORKDIR /opt/app
  RUN npm ci && npm run build
  FROM nginx as runner
  COPY --from=builder /opt/app /opt/app
  EXPOSE 80
  CMD ["/usr/sbin/nginx", "-g", "daemon off;"]
        </code>
      </pre>
    </section>

    <section class="slide">
      <pre class="place dockerfile">
        <code data-highlighted="yes" class="hljs language-swift">
          <span class="hljs-type">  FROM</span> node <span class="hljs-keyword">as</span> builder
          <span class="hljs-type">  WORKDIR</span> <span class="hljs-regexp">/opt/</span>app
          <span class="hljs-type">  RUN</span> npm ci <span class="hljs-operator">&amp;&amp;</span> npm run build
          <span class="del"><span class="hljs-operator">- </span><span class="hljs-type">FROM</span> nginx <span class="hljs-keyword">as</span> runner</span>
          <span class="add"><span class="hljs-operator">+ </span><span class="hljs-type">FROM</span> builder <span class="hljs-keyword">as</span> runner</span>
          <span class="hljs-type">  COPY</span> <span class="hljs-operator">--</span>from<span class="hljs-operator">=</span>builder <span class="hljs-regexp">/opt/</span>app <span class="hljs-regexp">/opt/</span>app
          <span class="hljs-type">  EXPOSE</span> <span class="hljs-number">80</span>
          <span class="hljs-type">  CMD</span> [<span class="hljs-string">"/usr/sbin/nginx"</span>, <span class="hljs-string">"-g"</span>, <span class="hljs-string">"daemon off;"</span>]
        </code>
      </pre>
    </section>

    <section class="slide">
      <pre class="place dockerfile">
        <code data-highlighted="yes" class="hljs language-swift">
          <span class="hljs-type">  FROM</span> node <span class="hljs-keyword">as</span> builder
          <span class="hljs-type">  WORKDIR</span> <span class="hljs-regexp">/opt/</span>app
          <span class="hljs-type">  RUN</span> npm ci <span class="hljs-operator">&amp;&amp;</span> npm run build
          <span class="hljs-type">  FROM</span> builder <span class="hljs-keyword">as</span> runner
          <span class="hljs-type">  COPY</span> <span class="hljs-operator">--</span>from<span class="hljs-operator">=</span>builder <span class="hljs-regexp">/opt/</span>app <span class="hljs-regexp">/opt/</span>app
          <span class="del"><span class="hljs-operator">- </span><span class="hljs-type">EXPOSE</span> <span class="hljs-number">80</span></span>
          <span class="add"><span class="hljs-operator">+ </span><span class="hljs-type">EXPOSE</span> <span class="hljs-number">3000</span></span>
          <span class="hljs-type">  CMD</span> [<span class="hljs-string">"/usr/sbin/nginx"</span>, <span class="hljs-string">"-g"</span>, <span class="hljs-string">"daemon off;"</span>]
        </code>
      </pre>
    </section>

    <section class="slide">
      <pre class="place dockerfile">
        <code data-highlighted="yes" class="hljs language-swift">
          <span class="hljs-type">  FROM</span> node <span class="hljs-keyword">as</span> builder
          <span class="hljs-type">  WORKDIR</span> <span class="hljs-regexp">/opt/</span>app
          <span class="hljs-type">  RUN</span> npm ci <span class="hljs-operator">&amp;&amp;</span> npm run build
          <span class="hljs-type">  FROM</span> builder <span class="hljs-keyword">as</span> runner
          <span class="hljs-type">  COPY</span> <span class="hljs-operator">--</span>from<span class="hljs-operator">=</span>builder <span class="hljs-regexp">/opt/</span>app <span class="hljs-regexp">/opt/</span>app
          <span class="hljs-type">  EXPOSE</span> <span class="hljs-number">3000</span>
          <span class="del"><span class="hljs-operator">- </span><span class="hljs-type">CMD</span> [<span class="hljs-string">"/usr/sbin/nginx"</span>, <span class="hljs-string">"-g"</span>, <span class="hljs-string">"daemon off;"</span>]</span>
          <span class="add"><span class="hljs-operator">+ </span><span class="hljs-type">CMD</span> [<span class="hljs-string">"node"</span>, <span class="hljs-string">"dist/index.js"</span>]</span>
        </code>
      </pre>
    </section>

    <section class="slide">
      <pre class="place">
        <code class="nohighlight">  FROM node as builder</code>
        <code class="nohighlight">  WORKDIR /opt/app</code>
        <code class="nohighlight">  RUN npm ci && npm run build</code>
        <code class="nohighlight">  FROM builder as runner</code>
        <code class="nohighlight">  COPY --from=builder /opt/app /opt/app</code>
        <code class="nohighlight">  EXPOSE 3000</code>
        <code class="nohighlight">  CMD ["node", "dist/index.js"]</code>
      </pre>
    </section>

    <section class="slide neck-bg1">
      <h2 class="shout shout-e">Probes</h2>
    </section>

    <section class="slide">
      <p>Liveness / Readiness / Startup</p>
      <p>
        Docker
        <br />
        <span>
          <a
            target="_blank"
            href="https://docs.docker.com/compose/compose-file/05-services/#healthcheck"
            >https://docs.docker.com/compose/compose-file/05-services/#healthcheck</a
          >
        </span>
      </p>

      <p>
        k8s
        <br />
        <a
          target="_blank"
          href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/"
          >https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/</a
        >
      </p>
    </section>

    <section class="slide">
      <pre class="place ts">
        <code>import express from 'express';

function probes(): Router {
  const router = Router();

  router.get('/healthz', (_req, res): void => {
    res.status(200).json({ msg: 'ok' });
  });

  router.get('/readiness', (_req, res): void => {
    res.status(200).json({ msg: 'ok' });
  });
  return router;
}</code>
      </pre>
    </section>

    <section class="slide neck-bg1">
      <h2 class="shout shout-e">Logs</h2>
    </section>

    <section class="slide">
      <ul class="place">
        <li>ELK</li>
        <li>Splunk</li>
        <li>Datadog</li>
      </ul>
    </section>

    <section class="slide">
      <pre class="place">
        <code>npm install winston</code>
      </pre>
    </section>

    <section class="slide">
      <pre class="place">
        <code>import winston from 'winston';</code>
        <code>import { config } from './config';</code>
        <code>  </code>
        <code>const { levels, colors } = winston.config.npm;</code>
        <code>winston.addColors(colors);</code>
        <code>  </code>
        <code>export const logger = winston.createLogger({</code>
        <code>  levels,</code>
        <code>  level: config.server.logLevel,</code>
        <code>  format: winston.format.combine(winston.format.timestamp(), winston.format.json()),</code>
        <code>  defaultMeta: { service: 'app-backend' },</code>
        <code>  transports: [new winston.transports.Console()],</code>
        <code>});</code>
      </pre>
    </section>

    <section class="slide clear">
      <img class="cover h" src="assets/images/kibana.jpg" />
    </section>

    <section class="slide neck-bg1">
      <h2 class="shout shout-e">Metrics</h2>
    </section>

    <section class="slide">
      <ul class="place">
        <li>Prometheus</li>
        <li>VictoriaMetrics</li>
        <li>Grafana</li>
      </ul>
    </section>

    <section class="slide">
      <pre class="place">
        <code>npm install express-prom-bundle prom-client</code>
      </pre>
    </section>

    <section class="slide">
      <pre class="place">
        <code>import winston from 'winston';</code>
        <code>import promBundle from 'express-prom-bundle';</code>
        <code>import { collectDefaultMetrics } from 'prom-client';</code>
        <code>  </code>
        <code>...</code>
        <code>  </code>
        <code>const metricsMiddleware = promBundle({ includeMethod: true });</code>
        <code>collectDefaultMetrics();</code>
        <code>  </code>
        <code>app.use(metricsMiddleware);</code>
        <code>  </code>
        <code>...</code>
      </pre>
    </section>

    <section class="slide clear">
      <img class="cover h" src="assets/images/grafana.png" />
    </section>

    <section class="slide">
      <pre class="place">
        <code>import { Gauge } from 'prom-client';</code>
        <code>  </code>
        <code>const statusGauge = new Gauge({ name: 'tjs_app_hits_counter' });</code>
        <code>  </code>
        <code>function counter(): Router {</code>
        <code>  const router = Router();</code>
        <code>  router.get('/increment', (_req, res): void => {</code>
        <code>    statusGauge.inc();</code>
        <code>    res.status(200).send();</code>
        <code>  });</code>
        <code>  router.get('/decrement', (_req, res): void => {</code>
        <code>    statusGauge.dec();</code>
        <code>    res.status(200).send();</code>
        <code>  });</code>
        <code>  return router;</code>
        <code>}</code>
      </pre>
    </section>

    <section class="slide clear">
      <img class="cover h" src="assets/images/v-metrics-gauge.jpg" />
    </section>

    <section class="slide neck-bg1">
      <h2 class="shout shout-e">Traces</h2>
    </section>

    <section class="slide">
      <ul class="place">
        <li>Dynatrace</li>
        <li>Jaeger</li>
        <li>Zipkin</li>
        <li>OpenTelemetry</li>
      </ul>
    </section>

    <section class="slide">
      <pre class="place">
        <code>npm install @opentelemetry/api @opentelemetry/sdk-node \</code>
        <code>  @opentelemetry/auto-instrumentations-node \</code>
        <code>  @opentelemetry/exporter-trace-otlp-grpc \</code>
        <code>  @opentelemetry/sdk-trace-node \</code>
        <code>  @opentelemetry/sdk-metrics</code>
      </pre>
    </section>

    <section class="slide">
      <pre class="place">
        <code>import { NodeSDK } from '@opentelemetry/sdk-node';</code>
        <code>...</code>
        <code>// WIP</code>
      </pre>
    </section>

    <section class="slide clear">
      <img class="cover h" src="assets/images/jaeger-search.jpg" />
    </section>

    <section class="slide clear">
      <img class="cover h" src="assets/images/jaeger-search-id.jpg" />
    </section>

    <section class="slide clear">
      <img class="cover h" src="assets/images/jaeger-dag.jpg" />
    </section>

    <section class="slide clear">
      <img class="cover h" src="assets/images/jaeger-fdg.jpg" />
    </section>

    <section class="slide clear">
      <img class="cover h" src="assets/images/jaeger-monitor.jpg" />
    </section>

    <section class="slide neck-bg1">
      <h2 class="shout shout-e">Alerting</h2>
    </section>

    <section class="slide">
      <h2>Alerting</h2>
      <ul>
        <li>Opsgenie</li>
        <li>PagerDuty</li>
        <li>Grafana OnCall</li>
      </ul>
    </section>

    <section class="slide neck-bg1">
      <p class="spotlight place top right">
        <h2  class="shout-e">Migration</h2>
        <h2 class="shout-e">Versioning</h2>
      </p>

      <!-- <ul>
        <li>Opt in ORM</li>
        <li>Plain SQL</li>
        <li>JS scripts for MongoDB</li>
        <li>scripts</li>
      </ul> -->
    </section>

    <section class="slide clear">
      <img class="cover w" src="assets/images/cronicas/03.jpeg" />
    </section>

    <section
      class="slide clear"
      style="
        background: rgb(172, 35, 51);
        background: radial-gradient(circle, rgba(172, 35, 51, 1) 0%, rgba(40, 2, 5, 1) 100%);
      "
    >
      <img class="cover h" src="assets/images/thats-all-folks.svg" />
    </section>

    <section class="slide clear">
      <img class="cover h" class="" src="assets/images/link-qr-code.png" />
    </section>

    <footer class="badge">
      <a href="https://github.com/shower/shower">Fork me on GitHub</a>
    </footer>

    <div class="progress"></div>

    <script src="node_modules/@shower/core/dist/shower.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      hljs.highlightAll();
    </script>
  </body>
</html>
